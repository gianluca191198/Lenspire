{"ast":null,"code":"import _regeneratorRuntime from\"C:/Unahur/CIU/Lenspire/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Unahur/CIU/Lenspire/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Unahur/CIU/Lenspire/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Buscador=function Buscador(_ref){var imagenes=_ref.imagenes,setImagenes=_ref.setImagenes,paginaActual=_ref.paginaActual,setPaginasTotales=_ref.setPaginasTotales,setPaginaActual=_ref.setPaginaActual;var apiKey='SudUi7PHizIEvv-99zhBa4q86SYxr_QA_xy13BhVmbY';var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),formattedQuery=_useState4[0],setFormatedQuery=_useState4[1];useEffect(function(){if(formattedQuery){fetchfotosPorQuery();}else{fetchfotos();}},[formattedQuery]);useEffect(function(){if(formattedQuery){fetchfotosPorQuery();}else{fetchfotos();}},[paginaActual]);var fetchfotosPorQuery=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:fetch(\"https://api.unsplash.com/search/photos?query=\".concat(formattedQuery,\"&page=\").concat(paginaActual),{headers:{Authorization:\"Client-ID \".concat(apiKey)}}).then(function(response){response.json().then(function(response){setImagenes(response.results);setPaginasTotales(response.total_pages);});}).catch(function(error){console.log('Error:',error);});case 1:case\"end\":return _context.stop();}},_callee);}));return function fetchfotosPorQuery(){return _ref2.apply(this,arguments);};}();var fetchfotos=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:fetch(\"https://api.unsplash.com/photos/?count=30&page=\".concat(paginaActual),{headers:{Authorization:\"Client-ID \".concat(apiKey)}}).then(function(response){response.json().then(function(response){setImagenes(response);});}).catch(function(error){console.log('Error:',error);});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function fetchfotos(){return _ref3.apply(this,arguments);};}();useEffect(function(){if(imagenes===undefined){fetchfotos();}},[]);var handleInputChange=function handleInputChange(event){var value=event.target.value;setQuery(value);};var handleSubmit=function handleSubmit(event){event.preventDefault();var newQuery=query.replace(/ /g,'+');setFormatedQuery(newQuery);setPaginaActual(1);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"form\",{className:\"form-inline my-2 my-lg-0 buscador\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"input\",{className:\"form-control mr-sm-2\",type:\"search\",placeholder:\"Buscar imagenes\",\"aria-label\":\"Buscar imagenes\",value:query,onChange:handleInputChange})})})});};export default Buscador;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","Fragment","_Fragment","Buscador","_ref","imagenes","setImagenes","paginaActual","setPaginasTotales","setPaginaActual","apiKey","_useState","_useState2","_slicedToArray","query","setQuery","_useState3","_useState4","formattedQuery","setFormatedQuery","fetchfotosPorQuery","fetchfotos","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","fetch","concat","headers","Authorization","then","response","json","results","total_pages","catch","error","console","log","stop","apply","arguments","_ref3","_callee2","_callee2$","_context2","undefined","handleInputChange","event","value","target","handleSubmit","preventDefault","newQuery","replace","children","className","onSubmit","type","placeholder","onChange"],"sources":["C:/Unahur/CIU/Lenspire/src/components/Buscador.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nconst Buscador = ({imagenes, setImagenes, paginaActual, setPaginasTotales, setPaginaActual}) => {\r\n\r\n    \r\n    const apiKey = 'SudUi7PHizIEvv-99zhBa4q86SYxr_QA_xy13BhVmbY';\r\n    const [query, setQuery] = useState('');\r\n    const [formattedQuery, setFormatedQuery] = useState('');\r\n\r\n\r\n    useEffect(() => {\r\n        if(formattedQuery){\r\n            fetchfotosPorQuery();\r\n        }else{\r\n            fetchfotos();\r\n        }\r\n    },[formattedQuery]);\r\n\r\n    useEffect(() => {\r\n        if(formattedQuery){\r\n            fetchfotosPorQuery();\r\n        }else{\r\n            fetchfotos();\r\n        }\r\n    },[paginaActual]);\r\n    \r\n    const fetchfotosPorQuery = async () => {\r\n        fetch(`https://api.unsplash.com/search/photos?query=${formattedQuery}&page=${paginaActual}`, {\r\n        headers: {\r\n            Authorization: `Client-ID ${apiKey}`\r\n        }\r\n        })\r\n        .then(response =>{ \r\n            response.json().then(response => {\r\n            setImagenes(response.results);\r\n            setPaginasTotales(response.total_pages);\r\n            })\r\n        })\r\n        .catch(error => {\r\n            console.log('Error:', error);\r\n        });\r\n    };\r\n\r\n    const fetchfotos = async () => {\r\n        fetch(`https://api.unsplash.com/photos/?count=30&page=${paginaActual}`, {\r\n        headers: {\r\n            Authorization: `Client-ID ${apiKey}`\r\n        }\r\n        })\r\n        .then(response =>{ \r\n            response.json().then(response => {\r\n            setImagenes(response);\r\n            })\r\n        })\r\n        .catch(error => {\r\n            console.log('Error:', error);\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(imagenes === undefined){\r\n            fetchfotos();\r\n        }\r\n    }, []);\r\n    \r\n\r\n    const handleInputChange = (event) => {\r\n      const value = event.target.value;\r\n      setQuery(value);\r\n    };\r\n  \r\n    const handleSubmit = (event) => {\r\n      event.preventDefault();\r\n      const newQuery = query.replace(/ /g, '+');\r\n      setFormatedQuery(newQuery);\r\n      setPaginaActual(1)\r\n    };\r\n\r\n    return ( \r\n        <>\r\n            <div>\r\n                <form className=\"form-inline my-2 my-lg-0 buscador\" onSubmit={handleSubmit}>\r\n                    <input className=\"form-control mr-sm-2\" \r\n                    type=\"search\" \r\n                    placeholder=\"Buscar imagenes\" \r\n                    aria-label=\"Buscar imagenes\"\r\n                    value={query}\r\n                    onChange={handleInputChange}/>\r\n                </form>\r\n            </div>\r\n        </>\r\n     );\r\n}\r\n \r\nexport default Buscador;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}